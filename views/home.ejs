<% include head %>
<script type='text/javascript' src='/js/jscolor.js'></script>
<% include header %>
    
    <a id='stats-generator' onclick='analyse([<%= stats.temperatureData %>], [<%= stats.humidityData %>], [<%= stats.onData %>])' hidden> </a>
    
    <!-- COLOR FORM -->
    <form class='my ui form' action='/set-color' method='post' id='color-form'>
      <input type='text' class='jscolor two wide field' name='color' value='<%= settings.lightColor %>'>
      <input type='checkbox' name='options[setAsDefault]' id='set-as-default' hidden>
      <input type='checkbox' name='options[changeToDefault]' id='change-to-default' hidden>
      <input type='checkbox' name='options[turnOff]' id='turn-off' hidden>
      <div class='ui submit button' id='change-color' onclick='submit()'> Change Color </div>
      <div class='ui submit button' id='set-default-button' onclick='submit(true)'> Set As Default </div>
      <div class='ui submit button' onclick='submit(false, true)'> Change to Default </div>
      <div class='ui submit button' id='off-button' onclick='submit(false, false, true)'> Turn Off </div>
    </form>
  
  <!-- DASHBOARD -->
  <div class='ui raised padded segment'>
      <h2 class='ui header centered'>Analytics Dashboard</h2>
      <div class='ui three small grey statistics'>
          <div class='statistic'>
              <div class='value'>
                  <%= stats.avgTemperature %> &degC
              </div>
              <div class='label'>
                  Avg Temperature
              </div>
          </div>
          <div class='statistic'>
              <div class='value'>
                  <%= stats.avgHumidity %>%
              </div>
              <div class='label'>
                  Avg Humidity
              </div>
          </div>
          <div class='statistic'>
              <div class='value'>
                  <%= stats.avgBrightness %>/1023
              </div>
              <div class='label'>
                  Avg Brightness
              </div>
          </div>
      </div>
      <div class='ui grid'>
          <div class='three column row'>
              <div class='column'>
                  <canvas id='temperature-chart' height='250'></canvas>
                  <h4 class='ui centered header'>Temperature Zones</h4>
              </div>
              <div class='column'>
                  <canvas id='humidity-chart' height='250'></canvas>
                  <h4 class='ui centered header'>Humidity Zones</h4>
              </div>
              <div class='column'>
                  <canvas id='on-chart' height='250'></canvas>
                  <h4 class='ui centered header'>Time On</h4>
              </div>
          </div>
      </div>
  </div>
  
  <!-- CONFIG FORM -->
              
  <div class='ui raised padded segment'>
    <h3 class='ui centered header'>Configuration</h3>
    <form class='ui form' action='/configure' method='post' id='color-form'>
    <div class='fields'>
      <div class='four wide field'>
        <label>Hot (&degC)</label>
        <input type='number' name='setting[hotThreshold]' value='<%= settings.hotThreshold %>'>
      </div>
      <div class='four wide field'>
        <label>Cold (&degC)</label>
        <input type='number' name='setting[coldThreshold]' value='<%= settings.coldThreshold %>'>
      </div>
      <div class='four wide field'>
        <label>Humid (%)</label>
        <input type='number' name='setting[humidThreshold]' value='<%= settings.humidThreshold %>'>
      </div>
      <div class='four wide field'>
        <label>Dry (%)</label>
        <input type='number' name='setting[dryThreshold]' value='<%= settings.dryThreshold %>'>
      </div>
      <div class='four wide field'>
        <label>Dark</label>
        <input type='number' name='setting[darkThreshold]' value='<%= settings.darkThreshold %>'>
      </div>
      <div class='two wide field'>
        <label>Submit</label>
        <input type='submit' class='ui submit button' name='configure' value='Submit'>
      </div>
    </div>
    </form>
  </div>
  
  <script type='text/javascript' src='/js/home.js'></script>
<% include foot %>

